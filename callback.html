<!doctype html>
<html lang="pt-br">
<head><meta charset="utf-8"><title>Callback ML</title><meta name="viewport" content="width=device-width,initial-scale=1"></head>
<body>
  <h1>Autorizando…</h1>
  <p>Se nada acontecer em 3s, copie o <code>code</code> abaixo e cole no terminal.</p>
  <p><strong>code:</strong> <code id="code">carregando…</code></p>
  <script>
    const p = new URLSearchParams(location.search);
    const code = p.get("code"), state = p.get("state") || "";
    document.getElementById("code").textContent = code || "sem code";
    // tenta redirecionar para o listener local
    if (code) {
      const url = `http://127.0.0.1:8080/callback?code=${encodeURIComponent(code)}&state=${encodeURIComponent(state)}`;
      setTimeout(()=> location.href = url, 800); // pequena espera para UX
    }
  </script>
</body>
</html>
